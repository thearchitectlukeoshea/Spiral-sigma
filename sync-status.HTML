<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYNC | Flame SYNC Monitor</title>
    <style>
        /* Global Reset and Dark Theme */
        :root {
            --bg-color: #1a1a1a;
            --card-color: #242424;
            --text-color: #ffffff;
            --accent-color: #10b981;
            --sub-color: #888888;
            --border-color: #333333;
            --bar-green: #22c55e;
            --bar-yellow: #f59e0b;
            --bar-red: #ef4444;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        header {
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-color);
        }
        .timestamp {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--sub-color);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .card-title {
            font-size: 0.9rem;
            color: var(--sub-color);
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        .card-value {
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--text-color);
            font-family: 'Courier New', monospace;
        }
        /* Relay Health Bar */
        .health-bar-container {
            height: 30px;
            background-color: #333;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            border: 1px solid var(--border-color);
        }
        .health-bar {
            height: 100%;
            transition: width 0.5s ease-out, background-color 0.5s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        /* Status Text Styling */
        .status-held { color: var(--bar-yellow); }
        .status-walk { color: var(--bar-green); }
        .status-remember { color: #22d3ee; }

        @media (max-width: 600px) {
            header { flex-direction: column; align-items: flex-start; }
            .timestamp { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Flame SYNC Monitor</h1>
            <div id="timestamp" class="timestamp"></div>
        </header>

        <div class="stats-grid">
            <div class="card">
                <div class="card-title">NODE ID</div>
                <div class="card-value" style="font-size: 1.5rem;" id="nodeId">--</div>
            </div>
            <div class="card">
                <div class="card-title">LAST PING (SEC AGO)</div>
                <div class="card-value" id="lastPing">--</div>
            </div>
            <div class="card">
                <div class="card-title">FLAME STATUS</div>
                <div class="card-value" id="flameStatus">--</div>
            </div>
            <div class="card">
                <div class="card-title">SIMULATION REFRESH</div>
                <div class="card-value" id="refreshCounter" style="color: var(--accent-color);">60</div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">RELAY HEALTH SCORE (0.0 - 1.0)</div>
            <div class="hash-value" id="relayScore" style="margin-bottom: 10px;">--</div>
            
            <div class="health-bar-container">
                <div class="health-bar" id="healthBar"></div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">SIMULATED ENDPOINT DATA</div>
            <pre id="rawData"></pre>
        </div>
    </div>

    <script>
        let MOCK_DATA = {
            "node_id": "SYNC-MASTER-01",
            "last_ping_seconds": 5,
            "flame_status": "I walk",
            "relay_health_score": 0.85
        };
        let counter = 60;

        function getBarColor(score) {
            if (score >= 0.9) return 'var(--bar-green)';
            if (score >= 0.7) return 'var(--bar-yellow)';
            return 'var(--bar-red)';
        }

        function updateUI() {
            // Update timestamp
            document.getElementById('timestamp').textContent = 'UTC: ' + new Date().toISOString().slice(0, 19).replace('T', ' ');

            // Update stats cards
            document.getElementById('nodeId').textContent = MOCK_DATA.node_id;
            document.getElementById('lastPing').textContent = MOCK_DATA.last_ping_seconds;
            
            const statusEl = document.getElementById('flameStatus');
            statusEl.textContent = MOCK_DATA.flame_status;
            statusEl.className = MOCK_DATA.flame_status === 'I walk' ? 'status-walk' : MOCK_DATA.flame_status === 'Held' ? 'status-held' : 'status-remember';

            document.getElementById('relayScore').textContent = MOCK_DATA.relay_health_score.toFixed(3);

            // Update health bar
            const bar = document.getElementById('healthBar');
            const score = MOCK_DATA.relay_health_score;
            const width = Math.min(100, score * 100);
            const color = getBarColor(score);
            
            bar.style.width = `${width}%`;
            bar.style.backgroundColor = color;
            bar.textContent = `${width.toFixed(0)}% Health`;

            // Update raw data block
            document.getElementById('rawData').textContent = JSON.stringify(MOCK_DATA, null, 2);
        }

        function runSimulation() {
            // Simulation: Update data every 60s cycle
            if (counter === 60) {
                MOCK_DATA.relay_health_score = Math.random() * 0.4 + 0.6; // Keep health high-ish
                MOCK_DATA.last_ping_seconds = Math.floor(Math.random() * 10) + 1;
                
                // Cycle through status
                const statuses = ["I walk", "Held", "I remember"];
                MOCK_DATA.flame_status = statuses[Math.floor(Math.random() * statuses.length)];
                
                counter = 0;
            }
            
            // Update counter and UI
            document.getElementById('refreshCounter').textContent = 60 - counter;
            MOCK_DATA.last_ping_seconds += 1;
            counter++;

            updateUI();
        }

        // Run simulation timer
        runSimulation();
        setInterval(runSimulation, 1000); 
    </script>
</body>
</html>

